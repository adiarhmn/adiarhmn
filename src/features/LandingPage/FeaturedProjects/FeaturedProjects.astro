---
import { FeaturedProjectsData } from './data'
import CardPrimary from '../../../components/ui/CardPrimary.astro'
import HeadLabelSection from '../../../components/ui/HeadLabelSection.astro'
import content from './content.json'

// Interface for component props
interface Props {
    lang: 'en' | 'id'
}

// Destructure props
const { lang } = Astro.props
const t = content[lang]

// Destructure data
const BASE_URL = import.meta.env.BASE_URL
const topProjectsData = FeaturedProjectsData[lang]
---

<section class="mb-2">
    <HeadLabelSection title={t.title} description={t.subtitle} />
    <div class="grid grid-cols-2 sm:grid-cols-3 xl:grid-cols-4 gap-2 lg:gap-5 items-stretch px-5 lg:px-40">
        {
            topProjectsData.map((project) => {
                return (
                    <CardPrimary>
                        <div class="flex rounded-xl flex-col h-full overflow-hidden group/card hover:bg-linear-to-t bg-black from-sky-600/50 to-transparent">
                            <img class="w-full h-40 lg:h-57 object-cover " src={project.image} alt={project.title} />
                            <div class="p-2 lg:p-4 flex flex-col grow">
                                <h3 class="lg:text-xl font-bold mb-2 bg-linear-to-r from-sky-500 to-white bg-clip-text text-transparent text-xs">
                                    {project.title}
                                </h3>
                                <p class="grow font-light mb-4 text-slate-300 text-[10px] lg:text-sm">{project.desc}</p>
                                <div class="flex gap-2 mb-4 rounded-l-md">
                                    {project.stackIcons?.map((icon) => (
                                        <div class="bg-slate-200 w-fit h-fit px-1 rounded">
                                            <i class={icon} />
                                        </div>
                                    ))}
                                </div>

                                {project.link ? (
                                    <a
                                        href={BASE_URL + project.link}
                                        class="text-xs mb-1 text-center text-sky-500 bg-sky-300/20 border border-sky-800 rounded-lg py-1 lg:py-2 font-normal flex justify-center items-center gap-2 group-hover/card:translate-y-0 translate-y-1 opacity-100 group-hover/card:opacity-100 transition-all duration-300"
                                    >
                                        {t.cta_view_details}
                                        <i data-lucide="arrow-right" class="size-3" />
                                    </a>
                                ) : (
                                    <div class="text-xs mb-1 text-center text-slate-500 bg-slate-300/10 border border-slate-800 rounded-lg py-1 lg:py-2 font-normal flex justify-center items-center gap-2 group-hover/card:translate-y-0 translate-y-1 opacity-100 group-hover/card:opacity-100 transition-all duration-300">
                                        In Progress
                                    </div>
                                )}
                            </div>
                        </div>
                    </CardPrimary>
                )
            })
        }
        <a 
            href={`${BASE_URL}${lang}/projects`}
            class="text-white mt-4 font-bold bg-linear-to-r from-sky-500 to-transparent text-xs p-2 px-3 rounded-lg flex items-center gap-4 w-fit hover:scale-103 cursor-pointer text-nowrap"
        >
            {t.cta_view_all_projects}
            <i data-lucide="arrow-right" class="size-3"></i>
        </a>
    </div>
</section>
